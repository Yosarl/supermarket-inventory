# Run database seed from GitHub (avoids local DNS/network issues).
# Usage: Actions tab → "Seed database" → "Run workflow".

name: Seed database

on:
  workflow_dispatch:

jobs:
  seed:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"

      - name: Install backend dependencies
        run: npm ci
        working-directory: backend

      - name: Run seed
        run: npm run seed
        working-directory: backend
        env:
          MONGODB_URI: ${{ secrets.MONGODB_URI }}
